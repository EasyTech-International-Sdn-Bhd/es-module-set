{"version":3,"sources":["index.tsx"],"names":["EventRegister","onEventListener","eventName","callback","_Watcher","DeviceEventEmitter","addListener","addEventListener","eventId","_Listeners","count","remove","refs","emit","emitEvent","data","listenersKey","lookupEvent","removeEventListener","removeAllListeners","on","rm","rmAll","onEvent"],"mappings":"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","sourcesContent":["import { DeviceEventEmitter } from 'react-native';\ntype ListenerType = {\n  [key: string]: {\n    eventName: string;\n    callback: Function;\n    remove: Function;\n  };\n};\nexport default class EventRegister {\n  static _Listeners = {\n    count: 0,\n    refs: {} as ListenerType,\n  };\n  static _Watcher: { [key: string]: any } = {};\n  static onEventListener(eventName: string, callback: () => any): void {\n    EventRegister._Watcher[eventName] = DeviceEventEmitter.addListener(\n      eventName,\n      callback\n    );\n  }\n  static addEventListener(eventName: string, callback: () => any) {\n    const eventId = `E-${EventRegister._Listeners.count}${eventName}`;\n    const remove = DeviceEventEmitter.addListener(eventId, callback);\n    EventRegister._Listeners.count++;\n    EventRegister._Listeners.refs[eventId] = {\n      eventName,\n      callback,\n      remove,\n    };\n    DeviceEventEmitter.emit(eventName, true);\n  }\n  static emitEvent(eventName: string, data: any) {\n    for (const listenersKey in EventRegister._Listeners) {\n      const { eventName: lookupEvent } =\n        EventRegister._Listeners.refs[listenersKey];\n      if (lookupEvent === eventName) {\n        DeviceEventEmitter.emit(listenersKey, data);\n      }\n    }\n  }\n  static removeEventListener(eventName: string) {\n    for (const listenersKey in EventRegister._Listeners) {\n      if (listenersKey in EventRegister._Listeners) {\n        const { eventName: lookupEvent, remove } =\n          EventRegister._Listeners.refs[listenersKey];\n        if (lookupEvent === eventName) {\n          remove && remove();\n          if (eventName in EventRegister._Watcher) {\n            EventRegister._Watcher[eventName] &&\n              EventRegister._Watcher[eventName]();\n            delete EventRegister._Watcher[eventName];\n          }\n          delete EventRegister._Listeners.refs[listenersKey];\n        }\n      }\n    }\n  }\n  static removeAllListeners() {\n    for (const listenersKey in EventRegister._Listeners) {\n      if (listenersKey in EventRegister._Listeners) {\n        const { eventName: lookupEvent } =\n          EventRegister._Listeners.refs[listenersKey];\n        EventRegister.removeEventListener(lookupEvent);\n      }\n    }\n  }\n  /*\n   * shortener\n   */\n  static on(eventName: string, callback: () => any) {\n    return EventRegister.addEventListener(eventName, callback);\n  }\n\n  static rm(eventName: string) {\n    return EventRegister.removeEventListener(eventName);\n  }\n\n  static rmAll() {\n    return EventRegister.removeAllListeners();\n  }\n\n  static emit(eventName: string, data: any) {\n    EventRegister.emitEvent(eventName, data);\n  }\n\n  static onEvent(eventName: string, callback: () => any) {\n    return EventRegister.onEventListener(eventName, callback);\n  }\n}\nexport { EventRegister as EventWatcher };\n"]}